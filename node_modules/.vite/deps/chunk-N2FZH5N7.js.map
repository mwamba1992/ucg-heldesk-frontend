{
  "version": 3,
  "sources": ["../../vuetify/src/composables/delay.ts", "../../vuetify/src/composables/focusTrap.ts", "../../vuetify/src/composables/scopeId.ts"],
  "sourcesContent": ["// Utilities\nimport { defer, propsFactory } from '@/util'\n\n// Types\nexport interface DelayProps {\n  closeDelay?: number | string\n  openDelay?: number | string\n}\n\n// Composables\nexport const makeDelayProps = propsFactory({\n  closeDelay: [Number, String],\n  openDelay: [Number, String],\n}, 'delay')\n\nexport function useDelay (props: DelayProps, cb?: (value: boolean) => void) {\n  let clearDelay: (() => void) = () => {}\n\n  function runDelay (isOpening: boolean, options?: { minDelay: number }) {\n    clearDelay?.()\n\n    const delay = isOpening ? props.openDelay : props.closeDelay\n\n    const normalizedDelay = Math.max(\n      options?.minDelay ?? 0,\n      Number(delay ?? 0)\n    )\n\n    return new Promise(resolve => {\n      clearDelay = defer(normalizedDelay, () => {\n        cb?.(isOpening)\n        resolve(isOpening)\n      })\n    })\n  }\n\n  function runOpenDelay () {\n    return runDelay(true)\n  }\n\n  function runCloseDelay (options?: { minDelay: number }) {\n    return runDelay(false, options)\n  }\n\n  return {\n    clearDelay,\n    runOpenDelay,\n    runCloseDelay,\n  }\n}\n", "// Utilities\nimport { nextTick, onScopeDispose, toRef, toValue, watch } from 'vue'\nimport { focusableChildren, IN_BROWSER, propsFactory } from '@/util'\n\n// Types\nimport type { Ref } from 'vue'\n\n// Types\nexport interface FocusTrapProps {\n  retainFocus: boolean\n  captureFocus: boolean\n  disableInitialFocus?: boolean\n}\n\n// Composables\nexport const makeFocusTrapProps = propsFactory({\n  retainFocus: Boolean,\n  captureFocus: Boolean,\n  /** @deprecated */\n  disableInitialFocus: Boolean,\n}, 'focusTrap')\n\nconst registry = new Map<symbol, {\n  isActive: Ref<boolean>\n  contentEl: Ref<HTMLElement | undefined>\n}>()\nlet subscribers = 0\n\nfunction onKeydown (e: KeyboardEvent) {\n  const activeElement = document.activeElement as HTMLElement | null\n  if (e.key !== 'Tab' || !activeElement) return\n\n  const parentTraps = Array.from(registry.values())\n    .filter(({ isActive, contentEl }) => isActive.value && contentEl.value?.contains(activeElement))\n    .map(x => x.contentEl.value)\n\n  let closestTrap\n  let currentParent = activeElement.parentElement\n  while (currentParent) {\n    if (parentTraps.includes(currentParent)) {\n      closestTrap = currentParent\n      break\n    }\n    currentParent = currentParent.parentElement\n  }\n\n  if (!closestTrap) return\n\n  const focusable = focusableChildren(closestTrap)\n    // excluding VListItems with tabindex=\"-2\"\n    .filter(x => x.tabIndex >= 0)\n\n  if (!focusable.length) return\n\n  const active = document.activeElement as HTMLElement | null\n  if (\n    focusable.length === 1 &&\n    focusable[0].classList.contains('v-list') &&\n    focusable[0].contains(active)\n  ) {\n    e.preventDefault()\n    return\n  }\n\n  const firstElement = focusable[0]\n  const lastElement = focusable[focusable.length - 1]\n\n  if (\n    e.shiftKey &&\n    (\n      active === firstElement ||\n      (firstElement.classList.contains('v-list') && firstElement.contains(active))\n    )\n  ) {\n    e.preventDefault()\n    lastElement.focus()\n  }\n\n  if (\n    !e.shiftKey &&\n    (\n      active === lastElement ||\n      (lastElement.classList.contains('v-list') && lastElement.contains(active))\n    )\n  ) {\n    e.preventDefault()\n    firstElement.focus()\n  }\n}\n\nexport function useFocusTrap (\n  props: FocusTrapProps,\n  { isActive, localTop, activatorEl, contentEl }: {\n    isActive: Ref<boolean>\n    localTop: Readonly<Ref<boolean>>\n    activatorEl?: Readonly<Ref<HTMLElement | undefined>>\n    contentEl: Readonly<Ref<HTMLElement | undefined>>\n  }\n) {\n  const trapId = Symbol('trap')\n\n  let focusTrapSuppressed = false\n  let focusTrapSuppressionTimeout = -1\n\n  async function onPointerdown () {\n    focusTrapSuppressed = true\n    focusTrapSuppressionTimeout = window.setTimeout(() => {\n      focusTrapSuppressed = false\n    }, 100)\n  }\n\n  async function captureOnFocus (e: FocusEvent) {\n    const before = e.relatedTarget as HTMLElement | null\n    const after = e.target as HTMLElement | null\n\n    document.removeEventListener('pointerdown', onPointerdown)\n    document.removeEventListener('keydown', captureOnKeydown)\n\n    await nextTick()\n\n    if (\n      isActive.value &&\n      !focusTrapSuppressed &&\n      before !== after &&\n      contentEl.value &&\n      // We're the menu without open submenus or overlays\n      toValue(localTop) &&\n      // It isn't the document or the container body\n      ![document, contentEl.value].includes(after!) &&\n      // It isn't inside the container body\n      !contentEl.value.contains(after)\n    ) {\n      const focusable = focusableChildren(contentEl.value)\n      focusable[0]?.focus()\n    }\n  }\n\n  function captureOnKeydown (e: KeyboardEvent) {\n    if (e.key !== 'Tab') return\n    document.removeEventListener('keydown', captureOnKeydown)\n\n    if (\n      isActive.value &&\n      contentEl.value &&\n      e.target &&\n      !contentEl.value.contains(e.target as Element)\n    ) {\n      const allFocusableElements = focusableChildren(document.documentElement)\n\n      if (\n        (e.shiftKey && e.target === allFocusableElements.at(0)) ||\n        (!e.shiftKey && e.target === allFocusableElements.at(-1))\n      ) {\n        const focusable = focusableChildren(contentEl.value)\n        if (focusable.length > 0) {\n          e.preventDefault()\n          focusable[0].focus()\n        }\n      }\n    }\n  }\n\n  const shouldCapture = toRef(() => isActive.value && props.captureFocus && !props.disableInitialFocus)\n\n  if (IN_BROWSER) {\n    watch(() => props.retainFocus, val => {\n      if (val) {\n        registry.set(trapId, { isActive, contentEl })\n      } else {\n        registry.delete(trapId)\n      }\n    }, { immediate: true })\n\n    watch(shouldCapture, val => {\n      if (val) {\n        document.addEventListener('pointerdown', onPointerdown)\n        document.addEventListener('focusin', captureOnFocus, { once: true })\n        document.addEventListener('keydown', captureOnKeydown)\n      } else {\n        document.removeEventListener('pointerdown', onPointerdown)\n        document.removeEventListener('focusin', captureOnFocus)\n        document.removeEventListener('keydown', captureOnKeydown)\n      }\n    }, { immediate: true })\n\n    if (subscribers++ < 1) {\n      document.addEventListener('keydown', onKeydown)\n    }\n  }\n\n  onScopeDispose(() => {\n    registry.delete(trapId)\n    clearTimeout(focusTrapSuppressionTimeout)\n    document.removeEventListener('pointerdown', onPointerdown)\n    document.removeEventListener('focusin', captureOnFocus)\n    document.removeEventListener('keydown', captureOnKeydown)\n\n    if (--subscribers < 1) {\n      document.removeEventListener('keydown', onKeydown)\n    }\n  })\n}\n", "// Utilities\nimport { getCurrentInstance } from '@/util'\n\nexport function useScopeId () {\n  const vm = getCurrentInstance('useScopeId')\n\n  const scopeId = vm!.vnode.scopeId\n\n  return { scopeId: scopeId ? { [scopeId]: '' } : undefined }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;AAUO,IAAMA,iBAAiBC,aAAa;EACzCC,YAAY,CAACC,QAAQC,MAAM;EAC3BC,WAAW,CAACF,QAAQC,MAAM;AAC5B,GAAG,OAAO;AAEH,SAASE,SAAUC,OAAmBC,IAA+B;AAC1E,MAAIC,aAA2BA,MAAM;EAAC;AAEtC,WAASC,SAAUC,WAAoBC,SAAgC;AACrEH;AAEA,UAAMI,QAAQF,YAAYJ,MAAMF,YAAYE,MAAML;AAElD,UAAMY,kBAAkBC,KAAKC,KAC3BJ,mCAASK,aAAY,GACrBd,OAAOU,SAAS,CAAC,CACnB;AAEA,WAAO,IAAIK,QAAQC,aAAW;AAC5BV,mBAAaW,MAAMN,iBAAiB,MAAM;AACxCN,iCAAKG;AACLQ,gBAAQR,SAAS;MACnB,CAAC;IACH,CAAC;EACH;AAEA,WAASU,eAAgB;AACvB,WAAOX,SAAS,IAAI;EACtB;AAEA,WAASY,cAAeV,SAAgC;AACtD,WAAOF,SAAS,OAAOE,OAAO;EAChC;AAEA,SAAO;IACLH;IACAY;IACAC;EACF;AACF;;;AClCO,IAAMC,qBAAqBC,aAAa;EAC7CC,aAAaC;EACbC,cAAcD;;EAEdE,qBAAqBF;AACvB,GAAG,WAAW;AAEd,IAAMG,WAAW,oBAAIC,IAGlB;AACH,IAAIC,cAAc;AAElB,SAASC,UAAWC,GAAkB;AACpC,QAAMC,gBAAgBC,SAASD;AAC/B,MAAID,EAAEG,QAAQ,SAAS,CAACF,cAAe;AAEvC,QAAMG,cAAcC,MAAMC,KAAKV,SAASW,OAAO,CAAC,EAC7CC,OAAOC,UAAA;AAjCZ;AAiCY,QAAC;MAAEC;MAAUC;IAAU,IAACF;AAAA,WAAKC,SAASE,WAASD,eAAUC,UAAVD,mBAAiBE,SAASZ;EAAc,CAAA,EAC9Fa,IAAIC,OAAKA,EAAEJ,UAAUC,KAAK;AAE7B,MAAII;AACJ,MAAIC,gBAAgBhB,cAAciB;AAClC,SAAOD,eAAe;AACpB,QAAIb,YAAYe,SAASF,aAAa,GAAG;AACvCD,oBAAcC;AACd;IACF;AACAA,oBAAgBA,cAAcC;EAChC;AAEA,MAAI,CAACF,YAAa;AAElB,QAAMI,YAAYC,kBAAkBL,WAAW,EAE5CR,OAAOO,OAAKA,EAAEO,YAAY,CAAC;AAE9B,MAAI,CAACF,UAAUG,OAAQ;AAEvB,QAAMC,SAAStB,SAASD;AACxB,MACEmB,UAAUG,WAAW,KACrBH,UAAU,CAAC,EAAEK,UAAUZ,SAAS,QAAQ,KACxCO,UAAU,CAAC,EAAEP,SAASW,MAAM,GAC5B;AACAxB,MAAE0B,eAAe;AACjB;EACF;AAEA,QAAMC,eAAeP,UAAU,CAAC;AAChC,QAAMQ,cAAcR,UAAUA,UAAUG,SAAS,CAAC;AAElD,MACEvB,EAAE6B,aAEAL,WAAWG,gBACVA,aAAaF,UAAUZ,SAAS,QAAQ,KAAKc,aAAad,SAASW,MAAM,IAE5E;AACAxB,MAAE0B,eAAe;AACjBE,gBAAYE,MAAM;EACpB;AAEA,MACE,CAAC9B,EAAE6B,aAEDL,WAAWI,eACVA,YAAYH,UAAUZ,SAAS,QAAQ,KAAKe,YAAYf,SAASW,MAAM,IAE1E;AACAxB,MAAE0B,eAAe;AACjBC,iBAAaG,MAAM;EACrB;AACF;AAEO,SAASC,aACdC,OAAqBC,OAOrB;AAAA,MANA;IAAEvB;IAAUwB;IAAUC;IAAaxB;EAKnC,IAACsB;AAED,QAAMG,SAASC,OAAO,MAAM;AAE5B,MAAIC,sBAAsB;AAC1B,MAAIC,8BAA8B;AAElC,iBAAeC,gBAAiB;AAC9BF,0BAAsB;AACtBC,kCAA8BE,OAAOC,WAAW,MAAM;AACpDJ,4BAAsB;IACxB,GAAG,GAAG;EACR;AAEA,iBAAeK,eAAgB3C,GAAe;AA/GhD;AAgHI,UAAM4C,SAAS5C,EAAE6C;AACjB,UAAMC,QAAQ9C,EAAE+C;AAEhB7C,aAAS8C,oBAAoB,eAAeR,aAAa;AACzDtC,aAAS8C,oBAAoB,WAAWC,gBAAgB;AAExD,UAAMC,SAAS;AAEf,QACExC,SAASE,SACT,CAAC0B,uBACDM,WAAWE,SACXnC,UAAUC;IAEVuC,QAAQjB,QAAQ;IAEhB,CAAC,CAAChC,UAAUS,UAAUC,KAAK,EAAEO,SAAS2B,KAAM;IAE5C,CAACnC,UAAUC,MAAMC,SAASiC,KAAK,GAC/B;AACA,YAAM1B,YAAYC,kBAAkBV,UAAUC,KAAK;AACnDQ,sBAAU,CAAC,MAAXA,mBAAcU;IAChB;EACF;AAEA,WAASmB,iBAAkBjD,GAAkB;AAC3C,QAAIA,EAAEG,QAAQ,MAAO;AACrBD,aAAS8C,oBAAoB,WAAWC,gBAAgB;AAExD,QACEvC,SAASE,SACTD,UAAUC,SACVZ,EAAE+C,UACF,CAACpC,UAAUC,MAAMC,SAASb,EAAE+C,MAAiB,GAC7C;AACA,YAAMK,uBAAuB/B,kBAAkBnB,SAASmD,eAAe;AAEvE,UACGrD,EAAE6B,YAAY7B,EAAE+C,WAAWK,qBAAqBE,GAAG,CAAC,KACpD,CAACtD,EAAE6B,YAAY7B,EAAE+C,WAAWK,qBAAqBE,GAAG,EAAE,GACvD;AACA,cAAMlC,YAAYC,kBAAkBV,UAAUC,KAAK;AACnD,YAAIQ,UAAUG,SAAS,GAAG;AACxBvB,YAAE0B,eAAe;AACjBN,oBAAU,CAAC,EAAEU,MAAM;QACrB;MACF;IACF;EACF;AAEA,QAAMyB,gBAAgBC,MAAM,MAAM9C,SAASE,SAASoB,MAAMtC,gBAAgB,CAACsC,MAAMrC,mBAAmB;AAEpG,MAAI8D,YAAY;AACdC,UAAM,MAAM1B,MAAMxC,aAAamE,SAAO;AACpC,UAAIA,KAAK;AACP/D,iBAASgE,IAAIxB,QAAQ;UAAE1B;UAAUC;QAAU,CAAC;MAC9C,OAAO;AACLf,iBAASiE,OAAOzB,MAAM;MACxB;IACF,GAAG;MAAE0B,WAAW;IAAK,CAAC;AAEtBJ,UAAMH,eAAeI,SAAO;AAC1B,UAAIA,KAAK;AACPzD,iBAAS6D,iBAAiB,eAAevB,aAAa;AACtDtC,iBAAS6D,iBAAiB,WAAWpB,gBAAgB;UAAEqB,MAAM;QAAK,CAAC;AACnE9D,iBAAS6D,iBAAiB,WAAWd,gBAAgB;MACvD,OAAO;AACL/C,iBAAS8C,oBAAoB,eAAeR,aAAa;AACzDtC,iBAAS8C,oBAAoB,WAAWL,cAAc;AACtDzC,iBAAS8C,oBAAoB,WAAWC,gBAAgB;MAC1D;IACF,GAAG;MAAEa,WAAW;IAAK,CAAC;AAEtB,QAAIhE,gBAAgB,GAAG;AACrBI,eAAS6D,iBAAiB,WAAWhE,SAAS;IAChD;EACF;AAEAkE,iBAAe,MAAM;AACnBrE,aAASiE,OAAOzB,MAAM;AACtB8B,iBAAa3B,2BAA2B;AACxCrC,aAAS8C,oBAAoB,eAAeR,aAAa;AACzDtC,aAAS8C,oBAAoB,WAAWL,cAAc;AACtDzC,aAAS8C,oBAAoB,WAAWC,gBAAgB;AAExD,QAAI,EAAEnD,cAAc,GAAG;AACrBI,eAAS8C,oBAAoB,WAAWjD,SAAS;IACnD;EACF,CAAC;AACH;;;ACtMO,SAASoE,aAAc;AAC5B,QAAMC,KAAKC,mBAAmB,YAAY;AAE1C,QAAMC,UAAUF,GAAIG,MAAMD;AAE1B,SAAO;IAAEA,SAASA,UAAU;MAAE,CAACA,OAAO,GAAG;IAAG,IAAIE;EAAU;AAC5D;",
  "names": ["makeDelayProps", "propsFactory", "closeDelay", "Number", "String", "openDelay", "useDelay", "props", "cb", "clearDelay", "runDelay", "isOpening", "options", "delay", "normalizedDelay", "Math", "max", "minDelay", "Promise", "resolve", "defer", "runOpenDelay", "runCloseDelay", "makeFocusTrapProps", "propsFactory", "retainFocus", "Boolean", "captureFocus", "disableInitialFocus", "registry", "Map", "subscribers", "onKeydown", "e", "activeElement", "document", "key", "parentTraps", "Array", "from", "values", "filter", "_ref", "isActive", "contentEl", "value", "contains", "map", "x", "closestTrap", "currentParent", "parentElement", "includes", "focusable", "focusableChildren", "tabIndex", "length", "active", "classList", "preventDefault", "firstElement", "lastElement", "shiftKey", "focus", "useFocusTrap", "props", "_ref2", "localTop", "activatorEl", "trapId", "Symbol", "focusTrapSuppressed", "focusTrapSuppressionTimeout", "onPointerdown", "window", "setTimeout", "captureOnFocus", "before", "relatedTarget", "after", "target", "removeEventListener", "captureOnKeydown", "nextTick", "toValue", "allFocusableElements", "documentElement", "at", "shouldCapture", "toRef", "IN_BROWSER", "watch", "val", "set", "delete", "immediate", "addEventListener", "once", "onScopeDispose", "clearTimeout", "useScopeId", "vm", "getCurrentInstance", "scopeId", "vnode", "undefined"]
}
