import{d as k,u as C,a as S,b as T,o as c,c as f,w as t,e as a,V as B,f as A,g as I,h as N,i as q,j as p,k as v,l as u,m as z,n as _,p as j,t as F,q as L,r as M,s as P,v as V,x as R,y as U,z as d,A as h}from"./index-Cix3CRG3.js";const D={class:"text-center mb-6"},E=k({__name:"LoginView",setup(H){const y=C(),b=S(),g=T(),l=d({username:"",password:""}),n=d(!1),r=d(!1),o=d(""),m=h(()=>l.value.username.length>=3&&l.value.password.length>=6);async function w(){var i,e;if(m.value){r.value=!0,o.value="";try{await g.login({username:l.value.username,password:l.value.password});const s=b.query.redirect;y.push(s||"/dashboard")}catch(s){if(s&&typeof s=="object"&&"response"in s){const x=s;o.value=((e=(i=x.response)==null?void 0:i.data)==null?void 0:e.message)||"Invalid username or password"}else o.value="An error occurred. Please try again."}finally{r.value=!1}}}return(i,e)=>(c(),f(U,{class:"fill-height",fluid:""},{default:t(()=>[a(B,{align:"center",justify:"center"},{default:t(()=>[a(A,{cols:"12",sm:"8",md:"4"},{default:t(()=>[a(I,{class:"elevation-12"},{default:t(()=>[a(N,{color:"primary",dark:"",flat:""},{default:t(()=>[a(q,null,{default:t(()=>[...e[4]||(e[4]=[p("MHB Help Desk",-1)])]),_:1})]),_:1}),a(v,{class:"pt-6"},{default:t(()=>[u("div",D,[a(z,{color:"primary",size:"80"},{default:t(()=>[a(_,{size:"48",icon:"mdi-headset"})]),_:1}),e[5]||(e[5]=u("h2",{class:"text-h5 mt-4"},"Welcome Back",-1)),e[6]||(e[6]=u("p",{class:"text-body-2 text-grey"},"Sign in to continue",-1))]),o.value?(c(),f(j,{key:0,type:"error",variant:"tonal",class:"mb-4",closable:"","onClick:close":e[0]||(e[0]=s=>o.value="")},{default:t(()=>[p(F(o.value),1)]),_:1})):L("",!0),a(M,{onSubmit:P(w,["prevent"])},{default:t(()=>[a(V,{modelValue:l.value.username,"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.username=s),label:"Username","prepend-inner-icon":"mdi-account",type:"text",autocomplete:"username",disabled:r.value,required:""},null,8,["modelValue","disabled"]),a(V,{modelValue:l.value.password,"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.password=s),label:"Password","prepend-inner-icon":"mdi-lock","append-inner-icon":n.value?"mdi-eye":"mdi-eye-off",type:n.value?"text":"password",autocomplete:"current-password",disabled:r.value,required:"","onClick:appendInner":e[3]||(e[3]=s=>n.value=!n.value)},null,8,["modelValue","append-inner-icon","type","disabled"]),a(R,{type:"submit",color:"primary",size:"large",block:"",loading:r.value,disabled:!m.value,class:"mt-4"},{default:t(()=>[...e[7]||(e[7]=[p(" Sign In ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),a(v,{class:"text-center pt-0"},{default:t(()=>[...e[8]||(e[8]=[u("p",{class:"text-caption text-grey"}," Need help? Contact IT Support ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}});export{E as default};
