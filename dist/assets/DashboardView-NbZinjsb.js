import{d as L,b as B,R as P,B as g,l as e,t as o,e as l,w as s,x as p,V as h,A as O,S as w,z as b,u as G,o as u,j as n,f as c,g as f,k as v,m as y,n as m,T as j,c as F,U as M,F as U,K as W,P as V,q as $}from"./index-Cix3CRG3.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";const q={class:"d-flex justify-space-between align-center mb-6"},K={class:"text-body-2 text-grey"},J={class:"text-h4 font-weight-bold"},Q={class:"text-h4 font-weight-bold"},X={class:"text-h4 font-weight-bold"},Y={class:"text-h4 font-weight-bold"},Z=["onClick"],tt={key:1,class:"text-center py-8"},et=L({__name:"DashboardView",setup(lt){const x=G(),D=B(),z=O(()=>D.user),i=b(!0),d=b({total:0,open:0,pending:0,resolved:0,resolvedToday:0}),k=b([]),N={NEW:"blue",ASSIGNED:"purple",IN_PROGRESS:"orange",PENDING:"amber",RESOLVED:"green",CLOSED:"grey",CANCELLED:"red"},S={CRITICAL:"red",HIGH:"orange",MEDIUM:"amber",LOW:"green"};async function E(){i.value=!0;try{const[r,t]=await Promise.all([w.get("/tickets/stats"),w.get("/tickets?limit=5")]);d.value=r.data,k.value=t.data.data}catch(r){console.error("Failed to fetch dashboard data:",r)}finally{i.value=!1}}function R(r){return new Date(r).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function _(r){x.push(`/tickets/${r.id}`)}function C(){x.push("/tickets/new")}function A(){x.push("/tickets")}return P(E),(r,t)=>{var T;return u(),g("div",null,[e("div",q,[e("div",null,[t[0]||(t[0]=e("h1",{class:"text-h4"},"Dashboard",-1)),e("p",K,"Welcome back, "+o((T=z.value)==null?void 0:T.fullName),1)]),l(p,{color:"primary","prepend-icon":"mdi-plus",onClick:C},{default:s(()=>[...t[1]||(t[1]=[n(" New Ticket ",-1)])]),_:1})]),l(h,null,{default:s(()=>[l(c,{cols:"12",sm:"6",md:"3"},{default:s(()=>[l(f,{loading:i.value},{default:s(()=>[l(v,{class:"d-flex align-center"},{default:s(()=>[l(y,{color:"blue-lighten-4",size:"56",class:"mr-4"},{default:s(()=>[l(m,{color:"blue",size:"32"},{default:s(()=>[...t[2]||(t[2]=[n("mdi-ticket-outline",-1)])]),_:1})]),_:1}),e("div",null,[e("div",J,o(d.value.open),1),t[3]||(t[3]=e("div",{class:"text-body-2 text-grey"},"Open Tickets",-1))])]),_:1})]),_:1},8,["loading"])]),_:1}),l(c,{cols:"12",sm:"6",md:"3"},{default:s(()=>[l(f,{loading:i.value},{default:s(()=>[l(v,{class:"d-flex align-center"},{default:s(()=>[l(y,{color:"orange-lighten-4",size:"56",class:"mr-4"},{default:s(()=>[l(m,{color:"orange",size:"32"},{default:s(()=>[...t[4]||(t[4]=[n("mdi-clock-outline",-1)])]),_:1})]),_:1}),e("div",null,[e("div",Q,o(d.value.pending),1),t[5]||(t[5]=e("div",{class:"text-body-2 text-grey"},"Pending",-1))])]),_:1})]),_:1},8,["loading"])]),_:1}),l(c,{cols:"12",sm:"6",md:"3"},{default:s(()=>[l(f,{loading:i.value},{default:s(()=>[l(v,{class:"d-flex align-center"},{default:s(()=>[l(y,{color:"green-lighten-4",size:"56",class:"mr-4"},{default:s(()=>[l(m,{color:"green",size:"32"},{default:s(()=>[...t[6]||(t[6]=[n("mdi-check-circle-outline",-1)])]),_:1})]),_:1}),e("div",null,[e("div",X,o(d.value.resolvedToday),1),t[7]||(t[7]=e("div",{class:"text-body-2 text-grey"},"Resolved Today",-1))])]),_:1})]),_:1},8,["loading"])]),_:1}),l(c,{cols:"12",sm:"6",md:"3"},{default:s(()=>[l(f,{loading:i.value},{default:s(()=>[l(v,{class:"d-flex align-center"},{default:s(()=>[l(y,{color:"purple-lighten-4",size:"56",class:"mr-4"},{default:s(()=>[l(m,{color:"purple",size:"32"},{default:s(()=>[...t[8]||(t[8]=[n("mdi-ticket-confirmation",-1)])]),_:1})]),_:1}),e("div",null,[e("div",Y,o(d.value.total),1),t[9]||(t[9]=e("div",{class:"text-body-2 text-grey"},"Total Tickets",-1))])]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}),l(h,{class:"mt-4"},{default:s(()=>[l(c,{cols:"12"},{default:s(()=>[l(f,{loading:i.value},{default:s(()=>[l(j,{class:"d-flex justify-space-between align-center"},{default:s(()=>[t[11]||(t[11]=e("span",null,"Recent Tickets",-1)),l(p,{variant:"text",color:"primary",size:"small",onClick:A},{default:s(()=>[...t[10]||(t[10]=[n(" View All ",-1)])]),_:1})]),_:1}),k.value.length>0?(u(),F(M,{key:0},{default:s(()=>[t[12]||(t[12]=e("thead",null,[e("tr",null,[e("th",null,"Ticket #"),e("th",null,"Title"),e("th",null,"Status"),e("th",null,"Priority"),e("th",null,"Created"),e("th",null,"Actions")])],-1)),e("tbody",null,[(u(!0),g(U,null,W(k.value,a=>(u(),g("tr",{key:a.id},[e("td",null,[e("span",{class:"font-weight-medium text-primary cursor-pointer",onClick:I=>_(a)},o(a.ticketNumber),9,Z)]),e("td",null,o(a.title),1),e("td",null,[l(V,{color:N[a.status],size:"small",variant:"tonal"},{default:s(()=>[n(o(a.status.replace("_"," ")),1)]),_:2},1032,["color"])]),e("td",null,[l(V,{color:S[a.priority],size:"small",variant:"tonal"},{default:s(()=>[n(o(a.priority),1)]),_:2},1032,["color"])]),e("td",null,o(R(a.createdAt)),1),e("td",null,[l(p,{icon:"mdi-eye",variant:"text",size:"small",onClick:I=>_(a)},null,8,["onClick"])])]))),128))])]),_:1})):i.value?$("",!0):(u(),g("div",tt,[l(m,{size:"64",color:"grey-lighten-1"},{default:s(()=>[...t[13]||(t[13]=[n("mdi-ticket-outline",-1)])]),_:1}),t[15]||(t[15]=e("p",{class:"text-h6 mt-4"},"No tickets yet",-1)),t[16]||(t[16]=e("p",{class:"text-body-2 text-grey"},"Create your first ticket to get started",-1)),l(p,{color:"primary",class:"mt-4",onClick:C},{default:s(()=>[...t[14]||(t[14]=[n(" Create Ticket ",-1)])]),_:1})]))]),_:1},8,["loading"])]),_:1})]),_:1})])}}}),ot=H(et,[["__scopeId","data-v-3b2af4e4"]]);export{ot as default};
